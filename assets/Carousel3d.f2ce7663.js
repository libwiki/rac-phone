import{_ as p,k as r,c as u,e as f,m as g,q as c,n as d,f as o,s as m,b as x,i as I,x as y}from"./index.db55bd2c.js";const S={name:"slide",props:{index:{type:Number}},data(){return{parent:this.$parent,styles:{},zIndex:999}},computed:{isCurrent(){return this.index===this.parent.currentIndex},leftIndex(){return this.parent.oneDirectional&&this.getSideIndex(this.parent.leftIndices)>this.parent.currentIndex-1?-1:this.getSideIndex(this.parent.leftIndices)},rightIndex(){return this.parent.oneDirectional&&this.getSideIndex(this.parent.rightIndices)>this.parent.total-this.parent.currentIndex-2?-1:this.getSideIndex(this.parent.rightIndices)},slideStyle(){let t={width:r(this.parent.slideWidth)};if(this.isCurrent){const i=this.parent.shrink;t.width=r(this.parent.slideWidth-i*2),t.transform=`translateX(${r(i)})`}else{const i=this.leftIndex,e=this.rightIndex;(e>=0||i>=0)&&(t=e>=0?this.calculatePosition(e,!0,this.zIndex):this.calculatePosition(i,!1,this.zIndex),t.opacity=1,t.visibility="visible"),this.parent.hasHiddenSlides&&(this.matchIndex(this.parent.leftOutIndex)?t=this.calculatePosition(this.parent.leftIndices.length-1,!1,this.zIndex):this.matchIndex(this.parent.rightOutIndex)&&(t=this.calculatePosition(this.parent.rightIndices.length-1,!0,this.zIndex)))}return Object.assign(t,{"border-width":r(this.parent.border),height:r(this.parent.slideHeight),transition:" transform "+this.parent.animationSpeed+"ms,                opacity "+this.parent.animationSpeed+"ms,                visibility "+this.parent.animationSpeed+"ms"})},computedClasses(){return{[`left-${this.leftIndex+1}`]:this.leftIndex>=0,[`right-${this.rightIndex+1}`]:this.rightIndex>=0,current:this.isCurrent}}},methods:{getSideIndex(t){let i=-1;return t.forEach((e,a)=>{this.matchIndex(e)&&(i=a)}),i},matchIndex(t){return t>=0?this.index===t:this.parent.total+t===this.index},calculatePosition(t,i,e){const a=this.parent.disable3d?0:parseInt(this.parent.inverseScaling)+(t+1)*100,n=this.parent.disable3d?0:parseInt(this.parent.perspective),s=this.parent.space==="auto"?parseInt((t+1)*(this.parent.width/1.5),10):parseInt((t+1)*this.parent.space,10),l=i?"translateX("+r(s)+") translateZ(-"+r(a)+") rotateY(-"+n+"deg)":"translateX(-"+r(s)+") translateZ(-"+r(a)+") rotateY("+n+"deg)",v=this.parent.space==="auto"?0:parseInt((t+1)*this.parent.space);return{transform:l,top:v,zIndex:e-(Math.abs(t)+1)}},goTo(){if(!this.isCurrent)this.parent.clickable===!0&&this.parent.goFar(this.index);else{const{index:t}=this;this.parent.onMainSlideClick({index:t})}}}};function b(t,i,e,a,n,s){return u(),f("div",{class:c(["carousel-3d-slide",s.computedClasses]),style:d(s.slideStyle),onClick:i[0]||(i[0]=l=>s.goTo())},[g(t.$slots,"default",{index:e.index,isCurrent:s.isCurrent,leftIndex:s.leftIndex,rightIndex:s.rightIndex})],6)}var E=p(S,[["render",b]]);const w={props:{autoplay:{type:Boolean,default:!1},autoplayTimeout:{type:Number,default:2e3},autoplayHoverPause:{type:Boolean,default:!0}},data(){return{autoplayInterval:null}},destroyed(){this.pauseAutoplay(),this.$el.removeEventListener("mouseenter",this.pauseAutoplay),this.$el.removeEventListener("mouseleave",this.startAutoplay)},methods:{pauseAutoplay(){this.autoplayInterval&&(this.autoplayInterval=clearInterval(this.autoplayInterval))},startAutoplay(){this.autoplay&&(this.autoplayInterval=setInterval(()=>{this.dir==="ltr"?this.goPrev():this.goNext()},this.autoplayTimeout))}},mounted(){this.autoplayHoverPause&&(this.$el.addEventListener("mouseenter",this.pauseAutoplay),this.$el.addEventListener("mouseleave",this.startAutoplay),this.startAutoplay())}};const _={name:"controls",props:{width:{type:[String,Number],default:50},height:{type:[String,Number],default:60},prevHtml:{type:String,default:"&lsaquo;"},nextHtml:{type:String,default:"&rsaquo;"}},data(){return{parent:this.$parent}},methods:{px2rem:r}},M={class:"carousel-3d-controls"},L=["innerHTML"],N=["innerHTML"];function C(t,i,e,a,n,s){return u(),f("div",M,[o("a",{href:"#",class:c(["prev",{disabled:!n.parent.isPrevPossible}]),onClick:i[0]||(i[0]=m(l=>n.parent.goPrev(),["prevent"])),style:d(`width: ${s.px2rem(e.width)}; height: ${s.px2rem(e.height)}; line-height: ${s.px2rem(e.height)};`),"aria-label":"Previous slide"},[o("span",{innerHTML:e.prevHtml},null,8,L)],6),o("a",{href:"#",class:c(["next",{disabled:!n.parent.isNextPossible}]),onClick:i[1]||(i[1]=m(l=>n.parent.goNext(),["prevent"])),style:d(`width: ${s.px2rem(e.width)}; height: ${s.px2rem(e.height)}; line-height: ${s.px2rem(e.height)};`),"aria-label":"Next slide"},[o("span",{innerHTML:e.nextHtml},null,8,N)],6)])}var O=p(_,[["render",C],["__scopeId","data-v-1803559c"]]);const h=()=>{},P={name:"carousel3d",components:{Controls:O},props:{count:{type:[Number,String],default:0},perspective:{type:[Number,String],default:35},display:{type:[Number,String],default:5},loop:{type:Boolean,default:!0},animationSpeed:{type:[Number,String],default:500},dir:{type:String,default:"rtl"},width:{type:[Number,String],default:360},height:{type:[Number,String],default:270},border:{type:[Number,String],default:1},space:{type:[Number,String],default:"auto"},startIndex:{type:[Number,String],default:0},clickable:{type:Boolean,default:!0},disable3d:{type:Boolean,default:!1},minSwipeDistance:{type:Number,default:10},inverseScaling:{type:[Number,String],default:300},shrink:{type:[Number,String],default:20},controlsVisible:{type:Boolean,default:!1},controlsPrevHtml:{type:String,default:"&lsaquo;"},controlsNextHtml:{type:String,default:"&rsaquo;"},controlsWidth:{type:[String,Number],default:50},controlsHeight:{type:[String,Number],default:50},onLastSlide:{type:Function,default:h},onSlideChange:{type:Function,default:h},bias:{type:String,default:"left"},onMainSlideClick:{type:Function,default:h},oneDirectional:{type:Boolean,default:!1}},data(){return{viewport:0,currentIndex:0,total:0,dragOffsetX:0,dragStartX:0,dragOffsetY:0,dragStartY:0,mousedown:!1,zIndex:998}},mixins:[w],watch:{count(){this.computeData()}},computed:{isLastSlide(){return this.currentIndex===this.total-1},isFirstSlide(){return this.currentIndex===0},isNextPossible(){return!(!this.loop&&this.isLastSlide)},isPrevPossible(){return!(!this.loop&&this.isFirstSlide)},slideWidth(){return this.viewport,parseInt(this.width)+parseInt(this.border,10)*2},slideHeight(){const t=parseInt(this.width,10)+parseInt(this.border,10)*2,i=parseInt(parseInt(this.height)+this.border*2,10),e=this.calculateAspectRatio(t,i);return this.slideWidth/e},visible(){return this.display>this.total?this.total:this.display},hasHiddenSlides(){return this.total>this.visible},leftIndices(){let t=(this.visible-1)/2;t=this.bias.toLowerCase()==="left"?Math.ceil(t):Math.floor(t);const i=[];for(let e=1;e<=t;e++)i.push(this.dir==="ltr"?(this.currentIndex+e)%this.total:(this.currentIndex-e)%this.total);return i},rightIndices(){let t=(this.visible-1)/2;t=this.bias.toLowerCase()==="right"?Math.ceil(t):Math.floor(t);const i=[];for(let e=1;e<=t;e++)i.push(this.dir==="ltr"?(this.currentIndex-e)%this.total:(this.currentIndex+e)%this.total);return i},leftOutIndex(){let t=(this.visible-1)/2;return t=this.bias.toLowerCase()==="left"?Math.ceil(t):Math.floor(t),t++,this.dir==="ltr"?this.total-this.currentIndex-t<=0?-parseInt(this.total-this.currentIndex-t):this.currentIndex+t:this.currentIndex-t},rightOutIndex(){let t=(this.visible-1)/2;return t=this.bias.toLowerCase()==="right"?Math.ceil(t):Math.floor(t),t++,this.dir==="ltr"?this.currentIndex-t:this.total-this.currentIndex-t<=0?-parseInt(this.total-this.currentIndex-t,10):this.currentIndex+t}},methods:{px2rem:r,goNext(){this.isNextPossible&&(this.isLastSlide?this.goSlide(0):this.goSlide(this.currentIndex+1))},goPrev(){this.isPrevPossible&&(this.isFirstSlide?this.goSlide(this.total-1):this.goSlide(this.currentIndex-1))},goSlide(t){this.currentIndex=t<0||t>this.total-1?0:t,this.isLastSlide&&(this.onLastSlide!==h&&console.warn("onLastSlide deprecated, please use @last-slide"),this.onLastSlide(this.currentIndex),this.$emit("last-slide",this.currentIndex)),this.$emit("before-slide-change",this.currentIndex),setTimeout(()=>this.animationEnd(),this.animationSpeed)},goFar(t){let i=t===this.total-1&&this.isFirstSlide?-1:t-this.currentIndex;this.isLastSlide&&t===0&&(i=1);const e=i<0?-i:i;let a=0,n=0;for(;n<e;)n+=1,setTimeout(()=>i<0?this.goPrev(e):this.goNext(e),e===1?0:a),a+=this.animationSpeed/e},animationEnd(){this.onSlideChange!==h&&console.warn("onSlideChange deprecated, please use @after-slide-change"),this.onSlideChange(this.currentIndex),this.$emit("after-slide-change",this.currentIndex)},handleMouseup(){this.mousedown=!1,this.dragOffsetX=0,this.dragOffsetY=0},handleMousedown(t){t.touches||t.preventDefault(),this.mousedown=!0,this.dragStartX="ontouchstart"in window?t.touches[0].clientX:t.clientX,this.dragStartY="ontouchstart"in window?t.touches[0].clientY:t.clientY},handleMousemove(t){if(!this.mousedown)return;const i="ontouchstart"in window?t.touches[0].clientX:t.clientX,e="ontouchstart"in window?t.touches[0].clientY:t.clientY,a=this.dragStartX-i,n=this.dragStartY-e;this.dragOffsetX=a,this.dragOffsetY=n,!(Math.abs(this.dragOffsetY)>Math.abs(this.dragOffsetX))&&(this.dragOffsetX>this.minSwipeDistance?(this.handleMouseup(),this.goNext()):this.dragOffsetX<-this.minSwipeDistance&&(this.handleMouseup(),this.goPrev()))},attachMutationObserver(){const t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(t){const i={attributes:!0,childList:!0,characterData:!0};this.mutationObserver=new t(()=>{this.$nextTick(()=>{this.computeData()})}),this.$el&&this.mutationObserver.observe(this.$el,i)}},detachMutationObserver(){this.mutationObserver&&this.mutationObserver.disconnect()},getSlideCount(){if(this.count)return this.count;let t=[];return Array.isArray(this.$slots.default)?t=this.$slots.default:typeof this.$slots.default=="function"&&(t=this.$slots.default()),t.length?t.length:0},calculateAspectRatio(t,i){return Math.min(t/i)},computeData(t){this.total=this.getSlideCount(),(t||this.currentIndex>=this.total)&&(this.currentIndex=parseInt(this.startIndex)>this.total-1?this.total-1:parseInt(this.startIndex)),this.viewport=this.$el.clientWidth},setSize(){this.$el.style.cssText+="height:"+r(this.slideHeight)+";",this.$el.childNodes[0].style.cssText+="width:"+r(this.slideWidth)+"; height:"+r(this.slideHeight)+";"}},mounted(){this.computeData(!0),this.attachMutationObserver(),window.addEventListener("resize",this.setSize),"ontouchstart"in window?(this.$el.addEventListener("touchstart",this.handleMousedown),this.$el.addEventListener("touchend",this.handleMouseup),this.$el.addEventListener("touchmove",this.handleMousemove)):(this.$el.addEventListener("mousedown",this.handleMousedown),this.$el.addEventListener("mouseup",this.handleMouseup),this.$el.addEventListener("mousemove",this.handleMousemove))},beforeDestroy(){this.detachMutationObserver(),"ontouchstart"in window?this.$el.removeEventListener("touchmove",this.handleMousemove):this.$el.removeEventListener("mousemove",this.handleMousemove),window.removeEventListener("resize",this.setSize)}};function H(t,i,e,a,n,s){const l=x("controls");return u(),f("div",{class:"carousel-3d-container",style:d({height:s.px2rem(this.slideHeight)})},[o("div",{class:"carousel-3d-slider",style:d({width:s.px2rem(this.slideWidth),height:s.px2rem(this.slideHeight)})},[g(t.$slots,"default",{index:n.currentIndex},void 0,!0)],4),e.controlsVisible?(u(),I(l,{key:0,"next-html":e.controlsNextHtml,"prev-html":e.controlsPrevHtml,width:e.controlsWidth,height:e.controlsHeight},null,8,["next-html","prev-html","width","height"])):y("",!0)],4)}var X=p(P,[["render",H],["__scopeId","data-v-5c3a162a"]]);export{X as C,E as S};
